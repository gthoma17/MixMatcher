$def with (ingredients)
<link rel="stylesheet" type="text/css" href="static/css/style.css">
<script type="text/javascript">
	selectedIngredients = ""
	function main() {
		console.log("hello")
	}
	function toggle(id) {
		thisItem = document.getElementById(id)
		console.log("selected so far: " + selectedIngredients)
		if (selectedIngredients.indexOf(id+"|")>-1) {
			selectedIngredients = selectedIngredients.replace(id+"|", "")
			thisItem.style.background = "transparent"
		}
		else{
			selectedIngredients = selectedIngredients.concat(id,"|")
			thisItem.style.background = "red"
		}
		//console.log("now selected so far: " + selectedIngredients)
	}
	function prepAll(total) {
		for (var i = 1; i <= total; i++) {
			prepItem("ingredient-"+i)
		};
	}
	function prepItem(id) {
		thisItem = document.getElementById(id)
		thisItem.style.background = "transparent"
		thisItem.addEventListener("click", function(){ toggle(id); });
	}
</script>
	$for ingredient in ingredients:
		<div class="ingredient-selector" id="ingredient-$ingredient.id">
			<h4 class="ingredient-name">$ingredient.name</h4>
			<img class="ingredient-pic-small" src="$ingredient.picture">
		</div>
	<script type="text/javascript">
		prepAll("$(len(ingredients))")
	</script>

<script type="text/javascript">main()</script>